{% extends 'base.html' %}

{% block content %}
{% if event_list %}
    <div class="card">
        <div class="card-header">
            {% if searched %}
                You searched for {{ searched }}

            {% else %}
                Find an Event
            {% endif %}
        </div>
        <div class="card-body">

            <form   method="POST" action="{% url 'search-events' %}">
                {% csrf_token %}
            <input class="form-control me-2" type="search" placeholder="Search Events" aria-label="Search" name="searched">
            <button class="btn btn-outline-success" type="submit">Search</button>
            </form>
        </div>
    </div>



        {% if searched %}
            <h3>Here are the results based on your search for {{ searched }}</h3>
        
        <br/>
            {% for event in events %}
                <div class="card">
                    <div class="card-footer">
                        {{event}}
                    </div>
                    <div class="card-body">
                        <h5 class="card-title">Venue: 
                            {{event.venue }}
                        </h5>
                        <p class="card-text">
                            <ul>
                                <li>Date: {{ event.event_date }}</li>
                                <li>Venue: {{ event.venue }}</li>
                                <li>Manager: {{ event.manager }}</li>
                                <li>Description: {{ event.description }}</li>
                                <li>Attendees: <br/>
                                    {% for user in event.attendees.all %}
                                        {{ user }}<br/>
                                    {% endfor %}
                                </li>
                
                            </ul>
                        </p>
                    </div>
                    {% if user.is_authenticated %}
                        {% if user == event.manager %}
                            <div class="card-footer text-muted">
                                <a href="{% url 'update-event' event.id %}" class="btn btn-primary btn-sm">Update</a>
                
                                <a href="{% url 'delete-event' event.id %}" class="btn btn-danger btn-sm">Delete</a>
                            </div>
                        {% endif %}
                    {% endif %}
                </div>
                <br/><br/>
            {% endfor %}

        {% endif %}
        <br/>

    {% else %}

        <h3>Sorry, no events in database to search!</h3>
    {% endif %}










{% endblock %}